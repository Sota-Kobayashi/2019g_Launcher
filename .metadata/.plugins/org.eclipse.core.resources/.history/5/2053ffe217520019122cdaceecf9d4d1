/*
 * uart.hpp
 *
 *  Created on: 2019/03/29
 *      Author: User
 */

#ifndef MYHEADERS_UART_HPP_
#define MYHEADERS_UART_HPP_

#include <vector>
#include <array>
#include <string>
#include "stm32f4xx.h"
#include "stm32f4xx_conf.h"

class UART
{
private:
	void pinsInit_usart1();
	void uartInit_(const uint32_t setBaudrate = defaultBaudrate_);
	static constexpr uint32_t defaultBaudrate_ = 9600;
	USART_TypeDef* const useUartName_;
public:
	UART() = delete;

	UART(USART_TypeDef* const useUartName) : useUartName_(useUartName)
	{
		uartInit_();
		if(useUartName_ == USART1)pinsInit_usart1();
	}
	UART(USART_TypeDef* const useUartName, const uint32_t setBaudrate) : useUartName_(useUartName)
	{
		uartInit_(setBaudrate);
		if(useUartName_ == USART1)pinsInit_usart1();
	}
	void TransmitData(uint8_t sendByte);
	inline void TransmitData(const uint8_t* pSendData, const size_t size){ for(size_t i = 0;i < size;i++)TransmitData(*(pSendData+i)); }
	inline void TransmitData(const std::string sendString) { for(auto i : sendString)TransmitData(*((uint8_t*)(sendString.c_str()+i))); }
	template<size_t S>
	inline void TransmitData(const std::array<uint8_t,S>& sendDataArray){ for(auto i : sendDataArray)TransmitData(sendDataArray.at(i)); }
	inline void TransmitData(const std::vector<uint8_t>& sendVector){ for(auto i : sendVector)TransmitData(sendVector.at(i)); }
};



#endif /* MYHEADERS_UART_HPP_ */
